import{createElement as t}from"react";import"is-it-type";import"tiny-invariant";import"./constants.min.js";import{a as r,S as c}from"./shared.min.js";class e{constructor(t){this._cacheVar=r(t),this._cache={}}collectData(t){return a({extractor:this,children:t})}getData(){return this._cache}getScript(t){const c=r(t,this._cacheVar),e=this.getData(),i=n(c);return`<script>(window[${i}]=window[${i}]||{}).data=${n(e)}<\/script>`}}class i{constructor(t){this._cache={},this._ssrCache=t._cache}getCache(t){const r=t._id;if(r)return s(this._cache,r)}register(t,r){if(!r)return;const c=t._factory._id;if(c){for(;;){const r=t._parent;if(!r)break;t=r}s(this._ssrCache,c)[t._cacheKey]=t._value}}}function a({extractor:r,children:e}){return t(c.Provider,{value:new i(r),children:e})}function s(t,r){let c=t[r];return c||(c={},t[r]=c),c}function n(t){return JSON.stringify(t).replace(/<\//g,"<\\/")}export{e as DataExtractor,a as DataExtractorManager};
//# sourceMappingURL=server.min.js.map
