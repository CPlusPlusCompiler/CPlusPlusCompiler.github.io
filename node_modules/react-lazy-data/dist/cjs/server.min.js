"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react");require("is-it-type"),require("tiny-invariant"),require("./constants.min.js");var e=require("./shared.min.js");class r{constructor(t){this._cache={},this._ssrCache=t._cache}getCache(t){const e=t._id;if(e)return c(this._cache,e)}register(t,e){if(!e)return;const r=t._factory._id;if(r){for(;;){const e=t._parent;if(!e)break;t=e}c(this._ssrCache,r)[t._cacheKey]=t._value}}}function a({extractor:a,children:c}){return t.createElement(e.ServerContext.Provider,{value:new r(a),children:c})}function c(t,e){let r=t[e];return r||(r={},t[e]=r),r}function i(t){return JSON.stringify(t).replace(/<\//g,"<\\/")}exports.DataExtractor=class{constructor(t){this._cacheVar=e.getCacheVarFromOptionsWithValidate(t),this._cache={}}collectData(t){return a({extractor:this,children:t})}getData(){return this._cache}getScript(t){const r=e.getCacheVarFromOptionsWithValidate(t,this._cacheVar),a=this.getData(),c=i(r);return`<script>(window[${c}]=window[${c}]||{}).data=${i(a)}<\/script>`}},exports.DataExtractorManager=a;
//# sourceMappingURL=server.min.js.map
